{"ast":null,"code":"'use strict';\n\nvar React = require('react');\n\nvar PropTypes = require('prop-types');\n\nvar createReactClass = require('create-react-class');\n\nvar Interpolate = require('react-interpolate-component');\n\nvar translator = require('counterpart');\n\nvar extend = require('object-assign');\n\nvar translatorType = PropTypes.shape({\n  getLocale: PropTypes.func,\n  onLocaleChange: PropTypes.func,\n  offLocaleChange: PropTypes.func,\n  translate: PropTypes.func\n});\nvar keyType = PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]);\nvar Translate = createReactClass({\n  displayName: 'Translate',\n  contextTypes: {\n    translator: translatorType,\n    scope: keyType\n  },\n  propTypes: {\n    locale: PropTypes.string,\n    count: PropTypes.number,\n    content: keyType,\n    scope: keyType,\n    attributes: PropTypes.object,\n    with: PropTypes.object\n  },\n  statics: {\n    textContentComponents: ['title', 'option', 'textarea']\n  },\n  getDefaultProps: function () {\n    return {\n      component: 'span'\n    };\n  },\n  getInitialState: function () {\n    return {\n      locale: this.getTranslator().getLocale()\n    };\n  },\n  getTranslator: function () {\n    return this.context.translator || translator;\n  },\n  componentDidMount: function () {\n    if (!this.props.locale) {\n      this.getTranslator().onLocaleChange(this.localeChanged);\n    }\n  },\n  componentWillUnmount: function () {\n    if (!this.props.locale) {\n      this.getTranslator().offLocaleChange(this.localeChanged);\n    }\n  },\n  localeChanged: function (newLocale) {\n    this.setState({\n      locale: newLocale\n    });\n  },\n  render: function () {\n    var props = extend({}, this.props);\n    var translator = this.getTranslator();\n    var textContent = Translate.textContentComponents.indexOf(props.component) > -1;\n    var interpolate = textContent || props.unsafe === true;\n    var interpolations = props.with;\n    var attributeKey;\n    var attributeTranslationOptions = extend({\n      locale: this.state.locale,\n      scope: this.context.scope\n    }, props, interpolations, {\n      interpolate: true\n    });\n    var contentTranslationOptions = extend({}, attributeTranslationOptions, {\n      interpolate: interpolate\n    });\n    delete props.locale;\n    delete props.scope;\n    delete props.count;\n    delete props.with;\n    delete props.fallback;\n\n    if (props.attributes) {\n      for (var name in props.attributes) {\n        attributeKey = props.attributes[name];\n\n        if (attributeKey) {\n          props[name] = translator.translate(attributeKey, attributeTranslationOptions);\n        }\n      }\n\n      delete props.attributes;\n    }\n\n    if (props.content) {\n      var translation = translator.translate(props.content, contentTranslationOptions);\n      var interpolateProps = extend({}, props, {\n        with: interpolations\n      });\n      delete interpolateProps.content;\n      delete interpolateProps.children;\n      return React.createElement(Interpolate, interpolateProps, translation);\n    } else {\n      var component = props.component;\n      delete props.component;\n      delete props.unsafe;\n      return React.createElement(component, props);\n    }\n  }\n});\nmodule.exports = Translate;\n\nmodule.exports.translate = function (key, options) {\n  return React.createElement(Translate, extend({}, options, {\n    content: key\n  }));\n};\n\nmodule.exports.translatorType = translatorType;\nmodule.exports.getLocale = translator.getLocale.bind(translator);\nmodule.exports.setLocale = translator.setLocale.bind(translator);\nmodule.exports.onLocaleChange = translator.onLocaleChange.bind(translator);\nmodule.exports.offLocaleChange = translator.offLocaleChange.bind(translator);\nmodule.exports.registerTranslations = translator.registerTranslations.bind(translator);\n\nfunction withTranslations(DecoratedComponent, translations) {\n  if (!translations) {\n    return function (decoratedComponent) {\n      return withTranslations(decoratedComponent, DecoratedComponent);\n    };\n  }\n\n  var displayName = DecoratedComponent.displayName || DecoratedComponent.name || 'Component';\n\n  for (var locale in translations) {\n    var localeTranslations = translations[locale];\n    var scopedTranslations = {};\n    scopedTranslations[displayName] = localeTranslations;\n    translator.registerTranslations(locale, scopedTranslations);\n  }\n\n  return createReactClass({\n    displayName: displayName + 'WithTranslations',\n    childContextTypes: {\n      scope: keyType\n    },\n    getChildContext: function () {\n      return {\n        scope: displayName\n      };\n    },\n    render: function () {\n      return React.createElement(DecoratedComponent, this.props);\n    }\n  });\n}\n\nmodule.exports.withTranslations = withTranslations;","map":{"version":3,"sources":["/home/artyom/Documents/test/node_modules/react-translate-component/index.js"],"names":["React","require","PropTypes","createReactClass","Interpolate","translator","extend","translatorType","shape","getLocale","func","onLocaleChange","offLocaleChange","translate","keyType","oneOfType","string","arrayOf","Translate","displayName","contextTypes","scope","propTypes","locale","count","number","content","attributes","object","with","statics","textContentComponents","getDefaultProps","component","getInitialState","getTranslator","context","componentDidMount","props","localeChanged","componentWillUnmount","newLocale","setState","render","textContent","indexOf","interpolate","unsafe","interpolations","attributeKey","attributeTranslationOptions","state","contentTranslationOptions","fallback","name","translation","interpolateProps","children","createElement","module","exports","key","options","bind","setLocale","registerTranslations","withTranslations","DecoratedComponent","translations","decoratedComponent","localeTranslations","scopedTranslations","childContextTypes","getChildContext"],"mappings":"AAAA;;AAEA,IAAIA,KAAK,GAAGC,OAAO,CAAC,OAAD,CAAnB;;AACA,IAAIC,SAAS,GAAGD,OAAO,CAAC,YAAD,CAAvB;;AACA,IAAIE,gBAAgB,GAAGF,OAAO,CAAC,oBAAD,CAA9B;;AACA,IAAIG,WAAW,GAAGH,OAAO,CAAC,6BAAD,CAAzB;;AACA,IAAII,UAAU,GAAGJ,OAAO,CAAC,aAAD,CAAxB;;AACA,IAAIK,MAAM,GAAGL,OAAO,CAAC,eAAD,CAApB;;AAEA,IAAIM,cAAc,GAAGL,SAAS,CAACM,KAAV,CAAgB;AACnCC,EAAAA,SAAS,EAASP,SAAS,CAACQ,IADO;AAEnCC,EAAAA,cAAc,EAAIT,SAAS,CAACQ,IAFO;AAGnCE,EAAAA,eAAe,EAAGV,SAAS,CAACQ,IAHO;AAInCG,EAAAA,SAAS,EAASX,SAAS,CAACQ;AAJO,CAAhB,CAArB;AAOA,IAAII,OAAO,GAAGZ,SAAS,CAACa,SAAV,CAAoB,CAChCb,SAAS,CAACc,MADsB,EAEhCd,SAAS,CAACe,OAAV,CAAkBf,SAAS,CAACc,MAA5B,CAFgC,CAApB,CAAd;AAKA,IAAIE,SAAS,GAAGf,gBAAgB,CAAC;AAC/BgB,EAAAA,WAAW,EAAE,WADkB;AAG/BC,EAAAA,YAAY,EAAE;AACZf,IAAAA,UAAU,EAAEE,cADA;AAEZc,IAAAA,KAAK,EAAEP;AAFK,GAHiB;AAQ/BQ,EAAAA,SAAS,EAAE;AACTC,IAAAA,MAAM,EAAErB,SAAS,CAACc,MADT;AAETQ,IAAAA,KAAK,EAAGtB,SAAS,CAACuB,MAFT;AAGTC,IAAAA,OAAO,EAAEZ,OAHA;AAITO,IAAAA,KAAK,EAAEP,OAJE;AAKTa,IAAAA,UAAU,EAAEzB,SAAS,CAAC0B,MALb;AAMTC,IAAAA,IAAI,EAAE3B,SAAS,CAAC0B;AANP,GARoB;AAiB/BE,EAAAA,OAAO,EAAE;AACPC,IAAAA,qBAAqB,EAAE,CAAC,OAAD,EAAU,QAAV,EAAoB,UAApB;AADhB,GAjBsB;AAqB/BC,EAAAA,eAAe,EAAE,YAAW;AAC1B,WAAO;AAAEC,MAAAA,SAAS,EAAE;AAAb,KAAP;AACD,GAvB8B;AAyB/BC,EAAAA,eAAe,EAAE,YAAW;AAC1B,WAAO;AAAEX,MAAAA,MAAM,EAAE,KAAKY,aAAL,GAAqB1B,SAArB;AAAV,KAAP;AACD,GA3B8B;AA6B/B0B,EAAAA,aAAa,EAAE,YAAW;AACxB,WAAO,KAAKC,OAAL,CAAa/B,UAAb,IAA2BA,UAAlC;AACD,GA/B8B;AAiC/BgC,EAAAA,iBAAiB,EAAE,YAAW;AAC5B,QAAI,CAAC,KAAKC,KAAL,CAAWf,MAAhB,EAAwB;AACtB,WAAKY,aAAL,GAAqBxB,cAArB,CAAoC,KAAK4B,aAAzC;AACD;AACF,GArC8B;AAuC/BC,EAAAA,oBAAoB,EAAE,YAAW;AAC/B,QAAI,CAAC,KAAKF,KAAL,CAAWf,MAAhB,EAAwB;AACtB,WAAKY,aAAL,GAAqBvB,eAArB,CAAqC,KAAK2B,aAA1C;AACD;AACF,GA3C8B;AA6C/BA,EAAAA,aAAa,EAAE,UAASE,SAAT,EAAoB;AACjC,SAAKC,QAAL,CAAc;AAAEnB,MAAAA,MAAM,EAAEkB;AAAV,KAAd;AACD,GA/C8B;AAiD/BE,EAAAA,MAAM,EAAE,YAAW;AACjB,QAAIL,KAAK,GAAahC,MAAM,CAAC,EAAD,EAAK,KAAKgC,KAAV,CAA5B;AACA,QAAIjC,UAAU,GAAQ,KAAK8B,aAAL,EAAtB;AACA,QAAIS,WAAW,GAAO1B,SAAS,CAACa,qBAAV,CAAgCc,OAAhC,CAAwCP,KAAK,CAACL,SAA9C,IAA2D,CAAC,CAAlF;AACA,QAAIa,WAAW,GAAOF,WAAW,IAAIN,KAAK,CAACS,MAAN,KAAiB,IAAtD;AACA,QAAIC,cAAc,GAAIV,KAAK,CAACT,IAA5B;AAEA,QAAIoB,YAAJ;AAEA,QAAIC,2BAA2B,GAAG5C,MAAM,CACtC;AAAEiB,MAAAA,MAAM,EAAE,KAAK4B,KAAL,CAAW5B,MAArB;AAA6BF,MAAAA,KAAK,EAAE,KAAKe,OAAL,CAAaf;AAAjD,KADsC,EAEtCiB,KAFsC,EAGtCU,cAHsC,EAItC;AAAEF,MAAAA,WAAW,EAAE;AAAf,KAJsC,CAAxC;AAOA,QAAIM,yBAAyB,GAAG9C,MAAM,CACpC,EADoC,EAEpC4C,2BAFoC,EAGpC;AAAEJ,MAAAA,WAAW,EAAEA;AAAf,KAHoC,CAAtC;AAMA,WAAOR,KAAK,CAACf,MAAb;AACA,WAAOe,KAAK,CAACjB,KAAb;AACA,WAAOiB,KAAK,CAACd,KAAb;AACA,WAAOc,KAAK,CAACT,IAAb;AACA,WAAOS,KAAK,CAACe,QAAb;;AAEA,QAAIf,KAAK,CAACX,UAAV,EAAsB;AACpB,WAAK,IAAI2B,IAAT,IAAiBhB,KAAK,CAACX,UAAvB,EAAmC;AACjCsB,QAAAA,YAAY,GAAGX,KAAK,CAACX,UAAN,CAAiB2B,IAAjB,CAAf;;AAEA,YAAIL,YAAJ,EAAkB;AAChBX,UAAAA,KAAK,CAACgB,IAAD,CAAL,GAAcjD,UAAU,CAACQ,SAAX,CAAqBoC,YAArB,EAAmCC,2BAAnC,CAAd;AACD;AACF;;AAED,aAAOZ,KAAK,CAACX,UAAb;AACD;;AAED,QAAIW,KAAK,CAACZ,OAAV,EAAmB;AACjB,UAAI6B,WAAW,GAAQlD,UAAU,CAACQ,SAAX,CAAqByB,KAAK,CAACZ,OAA3B,EAAoC0B,yBAApC,CAAvB;AACA,UAAII,gBAAgB,GAAGlD,MAAM,CAAC,EAAD,EAAKgC,KAAL,EAAY;AAAET,QAAAA,IAAI,EAAEmB;AAAR,OAAZ,CAA7B;AAEA,aAAOQ,gBAAgB,CAAC9B,OAAxB;AACA,aAAO8B,gBAAgB,CAACC,QAAxB;AAEA,aAAOzD,KAAK,CAAC0D,aAAN,CAAoBtD,WAApB,EAAiCoD,gBAAjC,EAAmDD,WAAnD,CAAP;AACD,KARD,MAQO;AACL,UAAItB,SAAS,GAAGK,KAAK,CAACL,SAAtB;AAEA,aAAOK,KAAK,CAACL,SAAb;AACA,aAAOK,KAAK,CAACS,MAAb;AAEA,aAAO/C,KAAK,CAAC0D,aAAN,CAAoBzB,SAApB,EAA+BK,KAA/B,CAAP;AACD;AACF;AAzG8B,CAAD,CAAhC;AA4GAqB,MAAM,CAACC,OAAP,GAAiB1C,SAAjB;;AAEAyC,MAAM,CAACC,OAAP,CAAe/C,SAAf,GAA2B,UAASgD,GAAT,EAAcC,OAAd,EAAuB;AAChD,SAAO9D,KAAK,CAAC0D,aAAN,CAAoBxC,SAApB,EAA+BZ,MAAM,CAAC,EAAD,EAAKwD,OAAL,EAAc;AAAEpC,IAAAA,OAAO,EAAEmC;AAAX,GAAd,CAArC,CAAP;AACD,CAFD;;AAIAF,MAAM,CAACC,OAAP,CAAerD,cAAf,GAAgCA,cAAhC;AAEAoD,MAAM,CAACC,OAAP,CAAenD,SAAf,GAA2BJ,UAAU,CAACI,SAAX,CAAqBsD,IAArB,CAA0B1D,UAA1B,CAA3B;AACAsD,MAAM,CAACC,OAAP,CAAeI,SAAf,GAA2B3D,UAAU,CAAC2D,SAAX,CAAqBD,IAArB,CAA0B1D,UAA1B,CAA3B;AACAsD,MAAM,CAACC,OAAP,CAAejD,cAAf,GAAgCN,UAAU,CAACM,cAAX,CAA0BoD,IAA1B,CAA+B1D,UAA/B,CAAhC;AACAsD,MAAM,CAACC,OAAP,CAAehD,eAAf,GAAiCP,UAAU,CAACO,eAAX,CAA2BmD,IAA3B,CAAgC1D,UAAhC,CAAjC;AACAsD,MAAM,CAACC,OAAP,CAAeK,oBAAf,GAAsC5D,UAAU,CAAC4D,oBAAX,CAAgCF,IAAhC,CAAqC1D,UAArC,CAAtC;;AAEA,SAAS6D,gBAAT,CAA0BC,kBAA1B,EAA8CC,YAA9C,EAA4D;AAC1D,MAAI,CAACA,YAAL,EAAmB;AACjB,WAAO,UAASC,kBAAT,EAA6B;AAClC,aAAOH,gBAAgB,CAACG,kBAAD,EAAqBF,kBAArB,CAAvB;AACD,KAFD;AAGD;;AAED,MAAIhD,WAAW,GACbgD,kBAAkB,CAAChD,WAAnB,IACAgD,kBAAkB,CAACb,IADnB,IAEA,WAHF;;AAKA,OAAK,IAAI/B,MAAT,IAAmB6C,YAAnB,EAAiC;AAC/B,QAAIE,kBAAkB,GAAGF,YAAY,CAAC7C,MAAD,CAArC;AACA,QAAIgD,kBAAkB,GAAG,EAAzB;AAEAA,IAAAA,kBAAkB,CAACpD,WAAD,CAAlB,GAAkCmD,kBAAlC;AAEAjE,IAAAA,UAAU,CAAC4D,oBAAX,CAAgC1C,MAAhC,EAAwCgD,kBAAxC;AACD;;AAED,SAAOpE,gBAAgB,CAAC;AACtBgB,IAAAA,WAAW,EAAEA,WAAW,GAAG,kBADL;AAGtBqD,IAAAA,iBAAiB,EAAE;AACjBnD,MAAAA,KAAK,EAAEP;AADU,KAHG;AAOtB2D,IAAAA,eAAe,EAAE,YAAW;AAC1B,aAAO;AACLpD,QAAAA,KAAK,EAAEF;AADF,OAAP;AAGD,KAXqB;AAatBwB,IAAAA,MAAM,EAAE,YAAW;AACjB,aAAO3C,KAAK,CAAC0D,aAAN,CAAoBS,kBAApB,EAAwC,KAAK7B,KAA7C,CAAP;AACD;AAfqB,GAAD,CAAvB;AAiBD;;AAEDqB,MAAM,CAACC,OAAP,CAAeM,gBAAf,GAAkCA,gBAAlC","sourcesContent":["'use strict';\n\nvar React = require('react');\nvar PropTypes = require('prop-types');\nvar createReactClass = require('create-react-class');\nvar Interpolate = require('react-interpolate-component');\nvar translator = require('counterpart');\nvar extend = require('object-assign');\n\nvar translatorType = PropTypes.shape({\n  getLocale:        PropTypes.func,\n  onLocaleChange:   PropTypes.func,\n  offLocaleChange:  PropTypes.func,\n  translate:        PropTypes.func\n});\n\nvar keyType = PropTypes.oneOfType([\n  PropTypes.string,\n  PropTypes.arrayOf(PropTypes.string)\n]);\n\nvar Translate = createReactClass({\n  displayName: 'Translate',\n\n  contextTypes: {\n    translator: translatorType,\n    scope: keyType\n  },\n\n  propTypes: {\n    locale: PropTypes.string,\n    count:  PropTypes.number,\n    content: keyType,\n    scope: keyType,\n    attributes: PropTypes.object,\n    with: PropTypes.object\n  },\n\n  statics: {\n    textContentComponents: ['title', 'option', 'textarea']\n  },\n\n  getDefaultProps: function() {\n    return { component: 'span' };\n  },\n\n  getInitialState: function() {\n    return { locale: this.getTranslator().getLocale() };\n  },\n\n  getTranslator: function() {\n    return this.context.translator || translator;\n  },\n\n  componentDidMount: function() {\n    if (!this.props.locale) {\n      this.getTranslator().onLocaleChange(this.localeChanged);\n    }\n  },\n\n  componentWillUnmount: function() {\n    if (!this.props.locale) {\n      this.getTranslator().offLocaleChange(this.localeChanged);\n    }\n  },\n\n  localeChanged: function(newLocale) {\n    this.setState({ locale: newLocale });\n  },\n\n  render: function() {\n    var props           = extend({}, this.props);\n    var translator      = this.getTranslator();\n    var textContent     = Translate.textContentComponents.indexOf(props.component) > -1;\n    var interpolate     = textContent || props.unsafe === true;\n    var interpolations  = props.with;\n\n    var attributeKey;\n\n    var attributeTranslationOptions = extend(\n      { locale: this.state.locale, scope: this.context.scope },\n      props,\n      interpolations,\n      { interpolate: true }\n    );\n\n    var contentTranslationOptions = extend(\n      {},\n      attributeTranslationOptions,\n      { interpolate: interpolate }\n    );\n\n    delete props.locale;\n    delete props.scope;\n    delete props.count;\n    delete props.with;\n    delete props.fallback;\n\n    if (props.attributes) {\n      for (var name in props.attributes) {\n        attributeKey = props.attributes[name];\n\n        if (attributeKey) {\n          props[name] = translator.translate(attributeKey, attributeTranslationOptions);\n        }\n      }\n\n      delete props.attributes;\n    }\n\n    if (props.content) {\n      var translation      = translator.translate(props.content, contentTranslationOptions);\n      var interpolateProps = extend({}, props, { with: interpolations });\n\n      delete interpolateProps.content;\n      delete interpolateProps.children;\n\n      return React.createElement(Interpolate, interpolateProps, translation);\n    } else {\n      var component = props.component;\n\n      delete props.component;\n      delete props.unsafe;\n\n      return React.createElement(component, props);\n    }\n  }\n});\n\nmodule.exports = Translate;\n\nmodule.exports.translate = function(key, options) {\n  return React.createElement(Translate, extend({}, options, { content: key }));\n};\n\nmodule.exports.translatorType = translatorType;\n\nmodule.exports.getLocale = translator.getLocale.bind(translator);\nmodule.exports.setLocale = translator.setLocale.bind(translator);\nmodule.exports.onLocaleChange = translator.onLocaleChange.bind(translator);\nmodule.exports.offLocaleChange = translator.offLocaleChange.bind(translator);\nmodule.exports.registerTranslations = translator.registerTranslations.bind(translator);\n\nfunction withTranslations(DecoratedComponent, translations) {\n  if (!translations) {\n    return function(decoratedComponent) {\n      return withTranslations(decoratedComponent, DecoratedComponent);\n    };\n  }\n\n  var displayName =\n    DecoratedComponent.displayName ||\n    DecoratedComponent.name ||\n    'Component';\n\n  for (var locale in translations) {\n    var localeTranslations = translations[locale];\n    var scopedTranslations = {};\n\n    scopedTranslations[displayName] = localeTranslations;\n\n    translator.registerTranslations(locale, scopedTranslations);\n  }\n\n  return createReactClass({\n    displayName: displayName + 'WithTranslations',\n\n    childContextTypes: {\n      scope: keyType\n    },\n\n    getChildContext: function() {\n      return {\n        scope: displayName\n      };\n    },\n\n    render: function() {\n      return React.createElement(DecoratedComponent, this.props);\n    }\n  });\n}\n\nmodule.exports.withTranslations = withTranslations;\n"]},"metadata":{},"sourceType":"script"}